RewriteEngine On

# Handle frontend routes
RewriteRule ^(?!api/|public/).*$ public/index.php [L]

# Handle API routes
RewriteRule ^api/(.*)$ api/index.php [L,QSA]

# Security headers
<FilesMatch "\.(php|twig)$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

<Directory "public/">
    AllowOverride All
    Require all granted
</Directory>